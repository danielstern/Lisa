<!doctype HTML>
<!-- Lisa by Daniel Stern -->

<html ng-app='lisaApp'> 
<head>
  <title>LISA: The Neuro-Computational Matrix</title>
 <!-- <meta name="viewport" content="width=device-width; initial-scale=1.0;">-->

  <script src="lib/jquery/jquery-2.0.3.min.js"></script> 
  <script src="lib/angular/angular.js"></script>
  <script src="lib/less/less-1.3.3.min.js"></script>
  <script src="lib/bootstrap/js/bootstrap.js"></script>
  <script src="lib/underscore/underscore.js"></script>
  <script src="lib/underscore/underscore.string.min.js"></script>
  <script>
     _.mixin(_.str.exports())
  </script>

  <link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap-responsive.css">

  <script src="js/logic/Logic.js"></script>
  <script src="js/logic/Storyteller.js"></script>
  <script src="js/logic/Emotionalizer.js"></script>
  <script src="js/logic/Counterposer.js"></script>
  <script src="js/logic/MomentObject.js"></script>
  
  <script src="lang/verbs.js"></script>
  <script src="lang/sayings.js"></script>
  <script src="lang/attributes.js"></script>
  <script src="lang/things.js"></script>
  <script src="story/stories.js"></script>
  
  <script src="js/Brain.js"></script>
  <script src="js/Lisa.js"></script>
  <script src="js/Factory.js"></script>
  <script src="js/speech/Conjugator.js"></script>
  <script src="js/speech/Lexicator.js"></script>
  <script src="js/speech/Prepositor.js"></script>
  <script src="js/speech/Extractor.js"></script>
  <script src="js/speech/Momento.js"></script>
  <script src="js/speech/Speech.js"></script>
  <script src="js/memory/Memory.js"></script>
  <script src="js/utility/Utility.js"></script>

</head>
<body>
  <div class='container' ng-controller='LisaController'  style='padding:60px;'>
    <div class="row">
      <div class='span5'>
        <h3>Emily</h3>
           <div id='saying' ng-bind-html-unsafe='saying' style='margin-bottom:10px' ></div>
        <form id='conversation-form' ng-submit="reply('emote')">
          <input  ng-model='sayTo' class='input input-block-level' type='text'>
        </form>
          <button ng-click="reply('tell-story')" class='btn'>"Tell me a story about _."</button>
          <button ng-click="reply('story-excerpt')" class='btn'>"What do you know about _?"</button>
          <button ng-click="reply('emote')" class='btn'>"How do you feel about _?"</button>
          <button ng-click="reply('express-inheritance')" class='btn'>"What is _?"</button> 
      </div>
      <div class='span3'>
        <img src='../misc/lisa.jpg' width='200px' height='auto'>
      <form class='form'>
        <div class='controls'>
          <button ng-click='handleMenuClick(thing)' class='btn' ng-repeat="thing in things">
             <span >{{thing}}</span>
          </button>
        </div>
        </ul>
      </form>
      </div>
    </div>
  </div>
</body>

<script>

  var lisaApp = angular.module('lisaApp',[])
   .controller('LisaController', ['$scope', function($scope) {

      var $Lisa = new Lisa();
   _.defer(function learn(){
      $Lisa.learn(_things);
      $Lisa.learn(_attributes);
      $Lisa.learn(_sayings);
      $Lisa.learn(_verbs);
    })

      $scope.handleMenuClick = function(thing) {

      //  console.log('menu click...',thing);
        $scope.sayTo = thing;
        $scope.reply('story-excerpt');

      }


      $scope.saying = '...';
      $scope.things = [
        'Money',
        'Store',
        'Shoe',
        'Mall',
        "Emily's Convenience",
        "Lexy's",
      ]

      $scope.sayTo = _.sample($scope.things);

      $scope.reply = function(directive) {

     //   console.log('Reply',$scope.sayTo,directive);
        var reply = $Lisa.hears($scope.sayTo, directive);
        $scope.saying = reply[0];
        if (!reply[1])    return;
        $scope.thought = reply[1].word;
     }
  }])

</script>
<style>
 .word_split span:hover {
    font-weight:bold;
}
</style>