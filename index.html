<!doctype HTML>
<!-- Copyright 2013 danielstern.ca - feel free to examine, learn and apply -->

<html ng-app=''> 
<head>
	<title>Legend Game</title>
	<meta name="viewport" content="width=device-width; initial-scale=1.0;">
	
	<script type="text/javascript" src="//use.typekit.net/lhm5okc.js"></script>
	<script src="lib/jquery/jquery-1.10.1.min.js"></script>	
	<script src="lib/angular/angular.js"></script>
	<script src="lib/less/less-1.3.3.min.js"></script>
	<script src="lib/bootstrap/js/bootstrap.js"></script>
	<script src="lib/underscore/underscore.js"></script>

	<link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap-responsive.css">
    <!-- 
	-->
</head>
<div class='container'>
	<div class="row">
		<p id='dialogue'>Hello.</p>
		<form id='conversation-form'>
			<input id='conversation-input' type='text'>
		</form>
	</div>
</div>

<script>

  $('#conversation-form').submit(function(e){

  	var $input = $('#conversation-input');
  	var inputText = $input.val();
  	$input.val('');

  	$Lisa.isTalkingTo($responder);
  	$Lisa.hears(inputText);

  	function $responder(words) {
  		$('#dialogue').html(words);	
  	}



  	e.preventDefault();
  	return false;
  })


  function Lisa() {

  	var Lisa = this;
  	var inTheConversation = [];

  	Lisa.thinks = function(thought) {

  		console.log('LISA:' , thought);
  	}

  	Lisa.hears = function(words) {

  		Lisa.thinks(words);
  		Lisa.says(words);


  	}

  	Lisa.isTalkingTo = function(thing) {

  		inTheConversation.push(thing);

  	}

  	Lisa.says = function(words) {

  		_.each(inTheConversation, function(_responder){_responder(words)})
  		return words;

  	}
  }

  var $Lisa = new Lisa();

</script>
